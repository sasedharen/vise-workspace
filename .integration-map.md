# VISE System Integration Map

## Service Communication Flow

```mermaid
graph LR
    VF[vise-frontend] --> VB[vise-backend]
    VB --> AS[auth-service]
    VB --> DB[(PostgreSQL)]
    AS --> DB
    VF --> AS
```
Authentication Flow

User Login

vise-frontend → auth-service/api/auth/login
Response: JWT token + user details


API Request

vise-frontend → vise-backend/api/v1/{endpoint}
Header: Authorization: Bearer {token}


Token Validation

vise-backend → auth-service/api/auth/verify
Response: User details + permissions


Permission Check

vise-backend checks permissions locally
OR calls auth-service/api/auth/check-permission



Data Flow for Each Module
Admission Module
CREATE Operation:
1. vise-frontend: Form submission
2. vise-backend: Validate token with auth-service
3. vise-backend: Check create:admission permission
4. vise-backend: Save to database with branch_id and created_by
5. vise-backend: Return success/error
6. vise-frontend: Show toast notification

READ Operation:
1. vise-frontend: Request list/detail
2. vise-backend: Validate token
3. vise-backend: Filter by branch_id from token
4. vise-backend: Return filtered data
Shared Dependencies
Types/Interfaces Shared

User (auth-service ↔ vise-backend ↔ vise-frontend)
Permission (auth-service ↔ vise-backend ↔ vise-frontend)
Branch (all services)

Environment Variables
# vise-backend
AUTH_SERVICE_URL=http://localhost:8081
DATABASE_URL=postgresql://user:pass@localhost/vise
JWT_SECRET=shared-secret

# vise-frontend  
NEXT_PUBLIC_API_URL=http://localhost:8080
NEXT_PUBLIC_AUTH_URL=http://localhost:8081

# auth-service
DATABASE_URL=postgresql://user:pass@localhost/vise
JWT_SECRET=shared-secret
TOKEN_EXPIRY=15m
REFRESH_EXPIRY=7d
Port Allocation

vise-frontend: 3000
vise-backend: 8080
auth-service: 8081
PostgreSQL: 5432
Redis (cache): 6379


### Step 5: Usage Examples

When working with Windsurf, use these patterns:

1. **Starting work on a module:**
"I'm working on VISE project. Current context: admission module.
Need to add payment integration. Check vise-backend/models/admission.go
and vise-frontend/types/admission.ts for current structure."

2. **Creating cross-service features:**
"Add email notification feature to admission:

Update auth-service to store notification preferences
Add email field validation in vise-backend
Create notification UI in vise-frontend
Follow the integration map for service communication."


3. **Debugging authentication issues:**
"Debug auth issue: vise-frontend getting 401 on admission creation.
Check auth-service token validation, vise-backend middleware,
and vise-frontend auth headers. Use test account admin@vise.edu"

This setup ensures Windsurf understands your VISE project structure and maintains proper context across all three services!