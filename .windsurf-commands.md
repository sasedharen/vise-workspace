# VISE School Management System - Windsurf Quick Commands

## Module Creation Commands

### Create Complete Module
```
Create a complete {module_name} module with:
- Database migration in vise-backend/db/migrations/ with proper schema
- GORM model in vise-backend/internal/{module_name}/domain/
- Repository layer in vise-backend/internal/{module_name}/repository/
- Service layer in vise-backend/internal/{module_name}/service/
- HTTP handlers in vise-backend/internal/{module_name}/handler/
- API routes in vise-backend/internal/{module_name}/routes/
- TypeScript interface in vise-frontend/src/types/index.ts
- React components in vise-frontend/src/components/{module_name}/
- Form validation with Zod
- Proper multi-tenancy with branch_id
```

### Add Field to Existing Module
```
Add {field_name} field of type {type} to {module_name} module:
1. Create migration in vise-backend/db/migrations/ to add the field
2. Update GORM model in vise-backend/internal/{module_name}/domain/
3. Update TypeScript interface in vise-frontend/src/types/index.ts
4. Add form field with validation in vise-frontend/src/components/{module_name}/
5. Update API handlers to process the new field
```

## Database Operations

### Create New Migration
```
Create a new Flyway migration in vise-backend/db/migrations/ for {module_name} with:
- Proper versioning (V{next_number}__{description}.sql)
- CREATE TABLE with UUID primary key
- branch_id field with index
- Audit fields (created_at, updated_at, deleted_at)
- Proper foreign key relationships
- Performance indexes for 10M+ users
```

### Add Multi-tenancy Support
```
Enhance {module_name} module for multi-tenancy:
1. Ensure branch_id field exists in all tables
2. Add index on branch_id for performance
3. Update repository queries to filter by branch_id
4. Add branch_id validation in service layer
```

## Backend Development

### Create GORM Model
```
Create GORM model for {entity_name} in vise-backend/internal/{module_name}/domain/{entity_name}.go:
- Follow the standard model template with UUID primary key
- Include branch_id field with proper GORM tags
- Add JSON tags matching TypeScript interface
- Include audit fields (created_at, updated_at, deleted_at)
- Add proper validation tags
```

### Implement Repository Layer
```
Create repository for {entity_name} in vise-backend/internal/{module_name}/repository/{entity_name}_repository.go:
- Define interface with CRUD operations
- Implement with GORM
- Add branch_id filtering to all queries
- Include pagination for list operations
- Add proper error handling
```

### Create Service Layer
```
Implement service for {entity_name} in vise-backend/internal/{module_name}/service/{entity_name}_service.go:
- Add business logic separate from repository
- Implement validation rules
- Add transaction support for complex operations
- Handle error cases with proper domain errors
```

### Create API Handlers
```
Create HTTP handlers for {entity_name} in vise-backend/internal/{module_name}/handler/{entity_name}_handler.go:
- Implement RESTful endpoints (GET, POST, PUT, DELETE)
- Add proper request validation
- Include authentication middleware
- Return standardized response format
- Handle errors with appropriate status codes
```

## Frontend Development

### Create TypeScript Interface
```
Add TypeScript interface for {entity_name} in vise-frontend/src/types/index.ts:
- Match field names and types with GORM model
- Use proper TypeScript types based on the type mapping rules
- Include optional fields where appropriate
- Add validation constraints as comments
```

### Create React Components
```
Create React components for {entity_name} in vise-frontend/src/components/{module_name}/:
- List view with pagination and filtering
- Detail view with all fields
- Form component with validation
- Loading states and error handling
- Success notifications
```

## Auth Service Integration

### Add Authentication
```
Integrate {module_name} with auth-service:
1. Define permissions in auth-service
2. Add JWT validation middleware to routes
3. Implement role-based access control
4. Update frontend to handle authentication
5. Add permission-based UI elements
```

## Performance Optimization

### Optimize for Scale
```
Optimize {module_name} for 10M+ users:
1. Add appropriate database indexes
2. Implement efficient pagination
3. Add caching for frequently accessed data
4. Use lazy loading in frontend
5. Implement bulk operations for batch processing
```

## Testing Commands

### Generate Tests
```
Create tests for {module_name}:
1. Unit tests for service layer in vise-backend/internal/{module_name}/service/
2. Integration tests for API endpoints
3. Frontend component tests
4. E2E tests for critical flows
```

## Debugging Commands

### Fix Schema Synchronization
```
Fix schema synchronization for {module_name}:
1. Compare database schema in migrations
2. Check GORM model fields and tags
3. Verify TypeScript interface matches both
4. Create migration for any missing fields
5. Update all three layers to ensure consistency
```

## Why This Commands File Is Needed

The `.windsurf-commands.md` file serves several important purposes:

1. **Quick Reference**: Provides ready-to-use command templates that follow the project's development rules

2. **Consistency**: Ensures all team members follow the same patterns when requesting changes

3. **Efficiency**: Reduces the need to repeatedly explain the project structure in each request

4. **Completeness**: Reminds developers of all the layers that need to be updated when making changes

5. **Onboarding**: Helps new team members understand how to work with the codebase

When working with Windsurf or other AI assistants, you can copy these commands and customize them for your specific task, ensuring that all changes follow the established project structure and development rules.
